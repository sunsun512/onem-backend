# STEP1-1

### 지금의 코드는 문제가 많습니다. 무엇을 어떻게 고치면 좋을지 고민 해주세요

위 요청사항에 대한 답변입니다.

> 서비스 내 로그 없음, 추후 에러 상황에서 추적이 원인 분석 및 추적이 힘들다.

- 로그 라이브러리를 추가해서 요청과 반환에 대한 로그를 기록한다.

> - 랜덤 키로 키를 생성 하기 때문에 키 중복 가능성이 있다.
> - 키 4글자 → 생성되는 키가 짧아서 좋으나 그만큼 중복될 가능성이 높아지고 사용할 수 있는 키의 갯수에 한계가 생긴다.

- 키의 길이를 늘리고, 키 생성 법을 인코딩이나 중복확인 후 생성하는 로직으로 변경한다.

> 상황 별 에러 분리 안되어 있어서 에러 상황 시 원인을 알아내기 어렵다.

- 에러가 일어날 수 있는 상황을 추가로 특정하고, 에러 메시지를 추가한다.
    - ex) 키로 불러오는 origin url이 2개 이상 일 경우

> 데이터의 소실 가능성, Origin Url과 생성한 키에 대해 저장하고 있지 않아서, 서버가 다운 될 경우 기존 요청에 대해 데이터가 소실된다.

- 사용 할 데이터 베이스를 정하고, 생성 후 서비스에서 파생되는 값을 key-value로 저장한다.
- no-sql 데이터 베이스 사용이 적당할 것으로 생각됨.

> 조회 기능 API의 HTTP Method가 POST, 멱등성을 지원하지 않아 같은 결과에 대해 보장하지 않고, 캐싱을 하지 않으므로 속도적인 면도 GET을 사용하는 것에 비해서는 느릴 수 있다.

- GET 메소드로 변경.

> 서비스가 사용되는 정도에 비해 인프라 스펙이 넉넉하다. 서버 자원의 낭비가 될 수 도 있다.

- 서버 용량 조절
